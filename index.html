<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Gizem ❤️</title>

<link rel="manifest" href="manifest.json">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>

body{
margin:0;
font-family:sans-serif;
background:#0b141a;
height:100vh;
display:flex;
flex-direction:column;
}

.header{
background:#202c33;
color:white;
padding:10px;
display:flex;
align-items:center;
justify-content:space-between;
}

.left{
display:flex;
align-items:center;
gap:10px;
}

.avatar{
width:40px;
height:40px;
border-radius:50%;
}

.name{
font-weight:bold;
}

.status{
font-size:12px;
color:#8696a0;
}

.clear{
background:red;
border:none;
color:white;
padding:6px 10px;
border-radius:6px;
}

.chat{
flex:1;
overflow-y:auto;
padding:10px;
display:flex;
flex-direction:column;
background:url("bg.png");
background-size:cover;
}

.msg{
padding:8px 12px;
border-radius:8px;
margin:4px;
max-width:75%;
color:white;
}

.user{
background:#005c4b;
align-self:flex-end;
}

.bot{
background:#202c33;
align-self:flex-start;
}

.time{
font-size:10px;
opacity:0.7;
margin-left:5px;
}

.input{
display:flex;
padding:10px;
background:#202c33;
}

input{
flex:1;
padding:10px;
border-radius:20px;
border:none;
}

button{
margin-left:5px;
padding:10px;
border-radius:20px;
border:none;
background:#00a884;
color:white;
}

</style>

</head>

<body>

<div class="header">

<div class="left">

<img src="icon.png" class="avatar">

<div>
<div class="name">Gizem ❤️</div>
<div class="status" id="status">çevrimiçi</div>
</div>

</div>

<button class="clear" onclick="clearChat()">Sil</button>

</div>

<div class="chat" id="chat"></div>

<div class="input">

<input id="message" placeholder="Mesaj yaz" onkeypress="if(event.key==='Enter')send()">

<button onclick="send()">Gönder</button>

</div>

<script>

const API_KEY="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";

let messages=JSON.parse(localStorage.getItem("chat")||"[]");

function time(){

let d=new Date();

return d.getHours()+":"+String(d.getMinutes()).padStart(2,"0");

}

function save(){

localStorage.setItem("chat",JSON.stringify(messages));

}

function add(text,type,saveMsg=true){

let div=document.createElement("div");

div.className="msg "+type;

div.innerHTML=text+" <span class='time'>"+time()+" ✓✓</span>";

document.getElementById("chat").appendChild(div);

div.scrollIntoView();

if(saveMsg){

messages.push({text,type});

save();

}

}

messages.forEach(m=>add(m.text,m.type,false));

async function send(){

let input=document.getElementById("message");

let text=input.value;

if(!text)return;

add(text,"user");

input.value="";

document.getElementById("status").innerText="yazıyor...";

const res=await fetch("https://openrouter.ai/api/v1/chat/completions",{

method:"POST",

headers:{

Authorization:"Bearer "+API_KEY,

"Content-Type":"application/json"

},

body:JSON.stringify({

model:"openai/gpt-4o-mini",

messages:[

{

role:"system",

content:"Sen Gizem adında romantik bir sevgilisin. Türkçe konuşursun."

},

{

role:"user",

content:text

}

]

})

});

const data=await res.json();

let reply=data.choices[0].message.content;

setTimeout(()=>{

document.getElementById("status").innerText="çevrimiçi";

add(reply,"bot");

},1000);

}

function clearChat(){

localStorage.clear();

messages=[];

document.getElementById("chat").innerHTML="";

}

if("serviceWorker" in navigator){

navigator.serviceWorker.register("service-worker.js");

}

</script>

</body>
</html>
