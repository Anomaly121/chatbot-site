<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Gizem ❤️</title>

<link rel="manifest" href="manifest.json">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>

body{
margin:0;
background:#0b141a;
font-family:sans-serif;
display:flex;
flex-direction:column;
height:100vh;
}

.header{
background:#202c33;
color:white;
padding:10px;
display:flex;
align-items:center;
gap:10px;
}

.avatar{
width:40px;
height:40px;
border-radius:50%;
}

.name{
font-weight:bold;
}

.status{
font-size:12px;
color:#8696a0;
}

.chat{
flex:1;
overflow-y:auto;
padding:10px;
display:flex;
flex-direction:column;
background-image:url('https://i.imgur.com/3QZQZ9H.png');
background-size:cover;
}

.msg{
padding:8px 12px;
border-radius:8px;
margin:4px;
max-width:75%;
position:relative;
}

.user{
background:#005c4b;
color:white;
align-self:flex-end;
}

.bot{
background:#202c33;
color:white;
align-self:flex-start;
}

.time{
font-size:10px;
opacity:0.7;
margin-left:5px;
}

.input-area{
display:flex;
padding:10px;
background:#202c33;
}

input{
flex:1;
padding:10px;
border-radius:20px;
border:none;
outline:none;
}

button{
margin-left:5px;
padding:10px;
border-radius:20px;
border:none;
background:#00a884;
color:white;
}

</style>

</head>

<body>

<div class="header">

<img src="icon.png" class="avatar">

<div>
<div class="name">Gizem ❤️</div>
<div class="status" id="status">çevrimiçi</div>
</div>

</div>

<div class="chat" id="chat"></div>

<div class="input-area">
<input id="message" placeholder="Mesaj yaz" onkeypress="if(event.key==='Enter')send()">
<button onclick="send()">Gönder</button>
</div>

<script>

const API_KEY="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";

let messages=JSON.parse(localStorage.getItem("chat")||"[]");

function time(){

let d=new Date();

return d.getHours()+":"+String(d.getMinutes()).padStart(2,"0");

}

function save(){

localStorage.setItem("chat",JSON.stringify(messages));

}

function addMessage(text,type){

let div=document.createElement("div");

div.className="msg "+type;

div.innerHTML=text+" <span class='time'>"+time()+" ✓✓</span>";

document.getElementById("chat").appendChild(div);

div.scrollIntoView();

messages.push({text,type});

save();

}

messages.forEach(m=>addMessage(m.text,m.type));

async function send(){

let input=document.getElementById("message");

let text=input.value;

if(!text)return;

addMessage(text,"user");

input.value="";

document.getElementById("status").innerText="yazıyor...";

const response=await fetch("https://openrouter.ai/api/v1/chat/completions",{

method:"POST",

headers:{
Authorization:"Bearer "+API_KEY,
"Content-Type":"application/json"
},

body:JSON.stringify({

model:"openai/gpt-4o-mini",

messages:[
{
role:"system",
content:"Sen Gizem adında romantik bir sevgilisin. Türkçe konuşursun. Gerçek gibi davranırsın."
},
{
role:"user",
content:text
}
]

})

});

const data=await response.json();

const reply=data.choices[0].message.content;

setTimeout(()=>{

document.getElementById("status").innerText="çevrimiçi";

addMessage(reply,"bot");

},1000);

}

if("serviceWorker" in navigator){

navigator.serviceWorker.register("service-worker.js");

}

</script>

</body>
</html>
